---
- name: check current version after update
  #hosts: osversion
  #gather_facts: yes
  vars:
    upgrade_ios_version: "15.2(7)E7"

  tasks:
    - name: check current version
      ios_facts:

      debug:
        msg:
        - "Current version is {{ ansible_net_version }}"
        - "Upgrade image is  Version 15.2(7)E7"

    - name: compare current version to upgrade ios version
        msg:
        - "Image is not compliant and will be upgraded"

      when: ansible_net_version != upgrade_ios_version

       #assert:
        #that:
         # - ansible_net_version == upgrade_ios_version
        #success_msg: "{{ ansible_net_version }} has been successfully installed on your device: {{ inventory_hostname }}"
        #fail_msg: "'Version {{ upgrade_ios_version }}' has not been installed on your device: {{ inventory_hostname }}"
